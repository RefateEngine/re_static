$setblock ~ ~ ~ $(id)[facing=$(facing),half=lower,hinge=$(hinge),open=$(open),powered=$(powered)]
$setblock ~ ~1 ~ $(id)[facing=$(facing),half=upper,hinge=$(hinge),open=$(open),powered=$(powered)]